package com.gesila.test.guard.ui.handlers;

import java.io.File;
import java.util.Collection;
import java.util.Random;

import javax.inject.Inject;

import org.eclipse.e4.core.contexts.IEclipseContext;
import org.eclipse.e4.core.di.annotations.Execute;
import org.eclipse.e4.ui.model.application.ui.basic.MPart;
import org.eclipse.e4.ui.workbench.modeling.EPartService;
import org.eclipse.e4.ui.workbench.modeling.EPartService.PartState;
import org.eclipse.e4.ui.workbench.modeling.ESelectionService;
import org.eclipse.jface.viewers.StructuredSelection;
import org.eclipse.swt.widgets.FileDialog;
import org.eclipse.swt.widgets.Shell;

import com.gesila.test.guard.editor.parts.GesilaTestGuardOverviewPart;

/**
 * 
 * @author robin
 *
 */
public class OpenTestGuardHandler {

	@Inject
	private ESelectionService selectionService;

	@Execute
	public void execute(Shell shell, final IEclipseContext ctxt,EPartService partService) {
		FileDialog fileDialog = new FileDialog(shell);
		String filePath = fileDialog.open();
		MPart details = partService.findPart("com.gesila.test.guard.application.part.testoverview");
			File file = new File(filePath);
			Collection<MPart> collections = partService.getParts();
			for (MPart part : collections) {
				System.out.println(part.getObject());
				if (part.getObject() instanceof GesilaTestGuardOverviewPart) {
					((GesilaTestGuardOverviewPart) part.getObject()).update(file);
				}
			}
		}
		//partService.saveAll(false);
	
	
	public static void main(String[] args){
		Random random=new Random();
		System.err.println(random.nextInt(0));
		
		for (int i=0;i<100;i++){
		System.out.println((int)Math.ceil(Math.random()*0));
		}
	}
}
